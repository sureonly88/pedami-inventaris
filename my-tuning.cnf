[mariadbd]

# --- Koneksi ---
max_connections   = 300
back_log          = 512
wait_timeout      = 30
interactive_timeout = 60
max_allowed_packet = 128M
thread_cache_size  = 128
open_files_limit   = 200000

# --- InnoDB ---
innodb_buffer_pool_size       = 4G
innodb_buffer_pool_instances  = 2
innodb_log_file_size          = 1G
innodb_log_files_in_group     = 2
innodb_flush_log_at_trx_commit = 1
sync_binlog = 1
innodb_flush_method = O_DIRECT
innodb_flush_neighbors = 0
innodb_io_capacity     = 2000
innodb_io_capacity_max = 4000

# --- Per-connection buffers (hemat RAM) ---
tmp_table_size       = 32M
max_heap_table_size  = 32M
sort_buffer_size     = 256K
read_buffer_size     = 256K
read_rnd_buffer_size = 256K
join_buffer_size     = 256K

# --- Cache tabel ---
table_open_cache        = 4096
table_definition_cache  = 2048

# --- Binlog ---
binlog_format = ROW
server_id = 1

# --- Observabilitas ---
performance_schema = ON

# --- Thread Pool ---
thread_pool_size = 2
thread_pool_stall_limit = 60
